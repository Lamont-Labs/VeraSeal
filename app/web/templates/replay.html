<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VeraSeal - Verify {{ evaluation_id }}</title>
    <link rel="icon" type="image/png" sizes="48x48" href="/static/assets/favicon-48x48.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/assets/favicon-16x16.png">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <a href="/" class="nav-link back-link">&larr; Back to Home</a>
        <a href="/evaluations/{{ evaluation_id }}" class="nav-link back-link">&larr; Back to Proof Record</a>
        
        <header class="header">
            <h1>Verify Proof Record</h1>
            <p class="subtitle">This re-runs the evaluation using the stored input and confirms the output hashes match.</p>
        </header>

        <div class="card">
            <h2>Proof ID</h2>
            <span class="proof-id">{{ evaluation_id }}</span>
        </div>

        {% if result.replay_ok %}
        <div class="status-verified">
            <h2>Verified</h2>
            <p style="margin-top: 8px; color: var(--success);">The proof record is unchanged. Re-running the evaluation produced identical results.</p>
        </div>
        {% else %}
        <div class="status-failed">
            <h2>Verification Failed</h2>
            <p style="margin-top: 8px;">Something does not match. The proof record may have been altered.</p>
            
            <div style="margin-top: 16px;">
                <h3>Mismatches Detected:</h3>
                <ul style="margin-top: 8px;">
                {% for mismatch in result.mismatches %}
                    <li style="color: var(--error);">{{ mismatch }}</li>
                {% endfor %}
                </ul>
            </div>
        </div>
        {% endif %}

        <div class="card" style="margin-top: 24px;">
            <div class="btn-group">
                <a href="/evaluations/{{ evaluation_id }}" class="btn btn-secondary">View Proof Record</a>
                <a href="/" class="btn btn-secondary">Generate New Proof</a>
            </div>
        </div>
    </div>
</body>
</html>
